!function(e){function a(a){for(var r,s,c=a[0],i=a[1],o=a[2],m=0,d=[];m<c.length;m++)s=c[m],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&d.push(n[s][0]),n[s]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);for(u&&u(a);d.length;)d.shift()();return l.push.apply(l,o||[]),t()}function t(){for(var e,a=0;a<l.length;a++){for(var t=l[a],r=!0,c=1;c<t.length;c++){var i=t[c];0!==n[i]&&(r=!1)}r&&(l.splice(a--,1),e=s(s.s=t[0]))}return e}var r={},n={0:0},l=[];function s(a){if(r[a])return r[a].exports;var t=r[a]={i:a,l:!1,exports:{}};return e[a].call(t.exports,t,t.exports,s),t.l=!0,t.exports}s.m=e,s.c=r,s.d=function(e,a,t){s.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:t})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,a){if(1&a&&(e=s(e)),8&a)return e;if(4&a&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(s.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var r in e)s.d(t,r,function(a){return e[a]}.bind(null,r));return t},s.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(a,"a",a),a},s.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},s.p="";var c=window.webpackJsonp=window.webpackJsonp||[],i=c.push.bind(c);c.push=a,c=c.slice();for(var o=0;o<c.length;o++)a(c[o]);var u=i;l.push([102,1]),t()}({101:function(e,a,t){var r={"./es-us":70,"./es-us.js":70,"./ru":71,"./ru.js":71};function n(e){var a=l(e);return t(a)}function l(e){if(!t.o(r,e)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=l,e.exports=n,n.id=101},102:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),l=t(42),s=t.n(l),c=t(20),i=t(10),o=(t(86),t(90),t(17)),u=t.n(o),m=t(27),d=t.n(m),_=t(11),p=t(28),f=t(12),v=t.n(f),g=t(4),b=t.n(g),E="styles-module__errorLayout_54f3f",N="styles-module__show_afb94",y="styles-module__errMessage_430a0",h="styles-module__close_ead62";function O(e){var a=e.text,t=e.onClose,r=e.isError,l=(v()(e,["text","onClose","isError"]),""===a?"Ошибка не передана или не известна!":a);return n.a.createElement("div",{className:"".concat(E," ").concat(r&&N)},n.a.createElement("div",{className:h,onClick:t},n.a.createElement("p",null),n.a.createElement("p",null)),n.a.createElement("p",{className:y},l))}O.defaultProps={text:"Ошибка не передана или не известна!"},O.propTypes={text:b.a.string,onClose:b.a.func.isRequired};var w="styles-module__loader_c315e";function C(e){var a=e.widthHeight;e.props;return n.a.createElement("div",{className:w},n.a.createElement("div",{style:{width:"".concat(a),height:"".concat(a)}}))}C.defaultProps={widthHeight:""},C.propTypes={widthHeight:b.a.string};var j={header:"app-module__header_97303",btnMenu:"app-module__btnMenu_ed8dd",btnMenu_invisible:"app-module__btnMenu_invisible_568ed",btnMenu_opened:"app-module__btnMenu_opened_e16cf",menuWrapper:"app-module__menuWrapper_c9ddf",menuLeftPart:"app-module__menuLeftPart_a3a65",menuRightPart:"app-module__menuRightPart_656c3",menu:"app-module__menu_7dfe1",menu__item:"app-module__menu__item_6110e",menu__link:"app-module__menu__link_b0113",menu__link_active:"app-module__menu__link_active_ba43a"},k=t(31),P=t.n(k),M=t(35),S=t.n(M),D=t(14),L=t.n(D),x="styles-module__pageWrapper_7d6d1",V="styles-module__logo_7f184",$="styles-module__formWrapper_d4e34";function R(e){e.className;var a=e.form,t=v()(e,["className","form"]);return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:x},n.a.createElement("img",{className:V,src:"/assets/imgs/proceset_logo.png"}),n.a.createElement("div",{className:$},a,t.children)))}R.defaultProps={className:void 0,form:[]},R.propTypes={className:b.a.string,form:b.a.node};var T={inp:"styles-module__inp_df28d",err:"styles-module__err_2d0cb",errMessage:"styles-module__errMessage_cafcd",invisible:"styles-module__invisible_abe9f"};function A(e){var a=e.value,t=e.type,r=e.name,l=e.placeholder,s=e.onChange,c=e.className,i=e.isValid,o=e.disabled,u=e.errMessage;v()(e,["value","type","name","placeholder","onChange","className","isValid","disabled","errMessage"]);return n.a.createElement("div",{className:"".concat(T.wrap," ").concat(c)},n.a.createElement("input",{className:"".concat(i?T.inp:T.err),type:t,name:r,placeholder:l,value:a,onChange:s,disabled:o}),n.a.createElement("p",{className:"".concat(T.errMessage," ").concat(i&&T.invisible)},""==u?"Текст для высоты":u))}A.defaultProps={value:"",type:"text",name:"",placeholder:"",onChange:function(){},className:null,isValid:!0,disabled:!1,errMessage:"Текст для высоты"},A.propTypes={value:b.a.oneOfType([b.a.string,b.a.number]),type:b.a.string,name:b.a.string,placeholder:b.a.string,onChange:b.a.func,className:b.a.string,isValid:b.a.bool,disabled:b.a.bool,errMessage:b.a.oneOfType([b.a.string,b.a.number])};var z="styles-module__inpWrap_a22da",I="styles-module__wrap_ae388",q="styles-module__logo_67138",F="styles-module__inp_63ef7",H="styles-module__err_66fb6",Y="styles-module__errMessage_38dda",Z="styles-module__invisible_e714b";function U(e){var a=e.value,t=e.name,l=e.placeholder,s=e.onChange,c=e.className,i=e.isValid,o=e.disabled,m=e.errMessage,d=e.showPassword,_=(v()(e,["value","name","placeholder","onChange","className","isValid","disabled","errMessage","showPassword"]),Object(r.useState)(d)),p=u()(_,2),f=p[0],g=p[1],b="".concat("/",f?"assets/imgs/password_visible.png":"assets/imgs/password_invisible.png");return n.a.createElement("div",{className:"".concat(I," ").concat(c)},n.a.createElement("div",{className:"".concat(z)},n.a.createElement("input",{className:"".concat(i?F:H),type:f?"text":"password",name:t,placeholder:l,value:a,onChange:s,disabled:o}),n.a.createElement("img",{src:b,className:"".concat(q),onClick:function(){return g(!f)}})),n.a.createElement("p",{className:"".concat(Y," ").concat(i&&Z)},""==m?"Текст для высоты":m))}U.defaultProps={value:"",name:"",placeholder:"",onChange:function(){},className:null,isValid:!0,disabled:!1,errMessage:"Текст для высоты"},U.propTypes={value:b.a.oneOfType([b.a.string,b.a.number]),type:b.a.string,name:b.a.string,placeholder:b.a.string,onChange:b.a.func,className:b.a.string,isValid:b.a.bool,disabled:b.a.bool,errMessage:b.a.oneOfType([b.a.string,b.a.number])};var W="index-module__btn_a75a9";function B(e){var a=e.className,t=e.onClick,r=e.type,l=e.value,s=e.disabled;v()(e,["className","onClick","type","value","disabled"]);return n.a.createElement("input",{className:"".concat(W,"\n        ").concat(a&&a),type:r,value:l,onClick:function(e){e.stopPropagation(),t()},disabled:s})}B.defaultProps={type:"button",className:void 0,disabled:!1,onClick:function(){}},B.propTypes={className:b.a.string,onClick:b.a.func,type:b.a.string,disabled:b.a.bool,value:b.a.string.isRequired};var Q="styles-module__errorLayout_9266a",X="styles-module__dangerLogo_6ba7b",G="styles-module__errMessage_92e3c";function J(e){var a=e.text,t=(e.onClose,e.className),r=(v()(e,["text","onClose","className"]),""===a?"Ошибка не передана или не известна!":a);return n.a.createElement("div",{className:"".concat(Q," ").concat(t&&t)},n.a.createElement("img",{className:X,src:"".concat("/","assets/imgs/danger.png")}),n.a.createElement("p",{className:G},r))}J.defaultProps={className:null,text:"Ошибка не передана или не известна!"},J.propTypes={text:b.a.string,onClose:b.a.func,className:b.a.string};var K="USER/LOGIN";function ee(e){return{type:"ERRORS/ERROR_SHOW",payload:{isError:!0,errMessage:e}}}function ae(e){return{type:K,payload:{id:e,isAuthorized:!0}}}var te="styles-module__form_aeaab",re="styles-module__question_95400",ne="styles-module__registration_65484",le="styles-module__errorNotification_3ae3b";function se(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function ce(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?se(Object(t),!0).forEach((function(a){L()(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):se(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function ie(){var e=d()(["\n\tmutation($firstName: String!, $secondName: String!, $email: String!, $password: String!){\n\t\tsignup(firstName:$firstName, secondName: $secondName, email: $email, password:$password)\n\t}\n"]);return ie=function(){return e},e}var oe=Object(i.gql)(ie());var ue="styles-module__form_18398",me="styles-module__registration_d2354",de="styles-module__errorNotification_c0efb";function _e(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function pe(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?_e(Object(t),!0).forEach((function(a){L()(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_e(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function fe(){var e=d()(["\n  mutation ($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n\t\t\ttoken,\n\t\t\tuser {\n\t\t\t\tid\n\t\t\t}\n    }\n  }\n"]);return fe=function(){return e},e}var ve=Object(i.gql)(fe());var ge="styles-module__layout_dc008";function be(e){var a=e.className,t=v()(e,["className"]);return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"".concat(ge," ").concat(a)},t.children))}be.defaultProps={className:void 0},be.propTypes={className:b.a.string};var Ee={header:"styles-module__header_c18be",header__title:"styles-module__header__title_e3556",userData:"styles-module__userData_b18b8",userData__item:"styles-module__userData__item_32c42",userData__label:"styles-module__userData__label_0b699",userData__inp:"styles-module__userData__inp_80d41"};function Ne(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function ye(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?Ne(Object(t),!0).forEach((function(a){L()(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ne(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function he(){var e=d()(["\n\tmutation($id: Int!, $firstName: String!, $secondName: String!, $email: String!, $password: String!){\n\t\teditUser(id: $id, firstName:$firstName, secondName: $secondName, email: $email, password:$password){\n      id\n    }\n\t}\n"]);return he=function(){return e},e}function Oe(){var e=d()(["\n  query($id: Int!){\n    userById(id: $id){\n      id,\n      firstName,\n      secondName,\n      email\n    }\n  }\n"]);return Oe=function(){return e},e}var we=Object(i.gql)(Oe()),Ce=Object(i.gql)(he());var je=function(e){var a=Object(c.b)(),t=Object(c.c)((function(e){return e.user.id})),l=Object(i.useQuery)(we,{variables:{id:t}}),s=l.loading,o=l.error,m=l.data,d=Object(i.useMutation)(Ce),_=u()(d,2),p=_[0],f=_[1],v=f.loading;f.error,f.data,o&&(a(ee("Не удалось получить данные с сервера :(\r\n Попробуйте позже")),e.history.push("/"));var g=m?m.userById:{},b=g.firstName,E=void 0===b?"":b,N=g.secondName,y=void 0===N?"":N,h=g.email,O=void 0===h?"":h,w=Object(r.useState)(!1),j=u()(w,2),k=j[0],M=j[1],D=Object(r.useState)(!1),x=u()(D,2),V=x[0],$=x[1],R=Object(r.useState)({firstName:{value:E,errMessage:'Поле "имя" должно содержать минимум два символа и не должно содержать цифр.',isValid:!0,validate:function(e,a){return/^[a-zA-Zа-яА-Я']{2,}$/.test(e.trim())}},secondName:{value:y,errMessage:'Поле "фамилия" должно содержать минимум два символа и не должно содержать цифр.',isValid:!0,validate:function(e,a){return/^[a-zA-Zа-яА-Я']{1,}$/.test(e.trim())}},email:{value:O,errMessage:"Не корректный email",isValid:!0,validate:function(e,a){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.trim())}},password:{value:"",errMessage:"Пароль должен состоять из цифр, букв и хотя бы одного спец. символа из [!@#$%&_=.`~,[]:;|/]. Так же всего должно быть не меньше 8 символов.",isValid:!0,validate:function(e,a){return[/^.*[0-9]+.*$/,/^.*[!@#$%&_=\.`~,\[\]:;\{\}\|\\\/]+.*$/,/^.*[a-zA-Z]+.*$/,/^[\d\w\!\@\#\$\%\&\_\=\.\`\~\,\[\:\;\{\}\|\\\/]{8,}/].every((function(a){return a.test(e)}))}},checkPassword:{value:"",errMessage:"Пароли не совпадают",isValid:!0,validate:function(e,a){return e===a.password.value&&""!==e}}}),T=u()(R,2),z=T[0],I=T[1],q=function(e,a){z[a].validate(e,z)?I((function(t){return ye(ye({},t),{},L()({},a,ye(ye({},t[a]),{},{value:e,isValid:!0})))})):I((function(t){return ye(ye({},t),{},L()({},a,ye(ye({},t[a]),{},{value:e,isValid:!1})))}))};s||V||function(){var e={firstName:E,secondName:y,email:O};if(m){for(var a in e)q(e[a],a);$(!0)}}();var F=function(){var e=S()(P.a.mark((function e(){var r,n,l,s;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=z.firstName.value,n=z.secondName.value,l=z.email.value,s=z.password.value,e.next=7,p({variables:{id:t,email:l,firstName:r,secondName:n,password:s}});case 7:e.sent&&(M(!0),setTimeout((function(){M(!1)}),3e3)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),a(ee("Что то пошло не так :(\r\n Попробуйте позже"));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return n.a.createElement(n.a.Fragment,null,s?n.a.createElement(C,null):n.a.createElement(be,{className:Ee.layout},n.a.createElement("div",{className:Ee.header},n.a.createElement("p",{className:Ee.header__title},"".concat(E," ").concat(y,". Редактирование")),n.a.createElement(B,{disabled:v||k,value:v?"Сохранение...":k?"Сохранено":"Сохранить",onClick:function(){var e=Object.keys(z);e.every((function(e){return""!==z[e].value&&z[e].isValid}))?F():e.forEach((function(e){return q(z[e].value,e)}))}})),n.a.createElement("ul",{className:Ee.userData},n.a.createElement("li",{className:Ee.userData__item},n.a.createElement("label",{className:Ee.userData__label},"Имя"),n.a.createElement(A,{className:Ee.userData__inp,disabled:v,value:z.firstName.value,type:"text",name:"firstName",placeholder:"Имя",errMessage:z.firstName.errMessage,isValid:z.firstName.isValid,onChange:function(e){q(e.target.value,"firstName")}})),n.a.createElement("li",{className:Ee.userData__item},n.a.createElement("label",{className:Ee.userData__label},"Фамилия"),n.a.createElement(A,{className:Ee.userData__inp,disabled:v,value:z.secondName.value,type:"text",name:"secondName",placeholder:"Фамилия",errMessage:z.secondName.errMessage,isValid:z.secondName.isValid,onChange:function(e){q(e.target.value,"secondName")}})),n.a.createElement("li",{className:Ee.userData__item},n.a.createElement("label",{className:Ee.userData__label},"Электронная почта"),n.a.createElement(A,{className:Ee.userData__inp,disabled:v,value:z.email.value,type:"email",name:"email",placeholder:"Электронная почта",errMessage:z.email.errMessage,isValid:z.email.isValid,onChange:function(e){q(e.target.value,"email")}})),n.a.createElement("li",{className:Ee.userData__item},n.a.createElement("label",{className:Ee.userData__label},"Новый(или старый) пароль"),n.a.createElement(U,{className:Ee.userData__inp,disabled:v,value:z.password.value,name:"password",placeholder:"Не задано",errMessage:z.password.errMessage,isValid:z.password.isValid,onChange:function(e){q(e.target.value,"password")}})),n.a.createElement("li",{className:Ee.userData__item},n.a.createElement("label",{className:Ee.userData__label},"Повторите пароль"),n.a.createElement(U,{className:Ee.userData__inp,disabled:v,value:z.checkPassword.value,name:"checkPassword",placeholder:"Не задано",errMessage:z.checkPassword.errMessage,isValid:z.checkPassword.isValid,onChange:function(e){q(e.target.value,"checkPassword")}})))))},ke=t(32),Pe=t.n(ke),Me={card:"LineCard-module__card_22f08",header:"LineCard-module__header_62018",header__title:"LineCard-module__header__title_88478",header__link:"LineCard-module__header__link_34371",header__link_disabled:"LineCard-module__header__link_disabled_1ed13",body:"LineCard-module__body_9766a",body__item:"LineCard-module__body__item_ca65e",dataCell:"LineCard-module__dataCell_31316",dataCell__icon:"LineCard-module__dataCell__icon_91150",dataCell__data:"LineCard-module__dataCell__data_9a565",dataCell__title:"LineCard-module__dataCell__title_d06cb",dataCell__label:"LineCard-module__dataCell__label_10c2c",dateLine:"LineCard-module__dateLine_259fd",dateLine__title:"LineCard-module__dateLine__title_110e3",dateLine__date:"LineCard-module__dateLine__date_83fdf"};function Se(e){var a=e.className,t=(e.onClick,e.data),r=e.link,l=(v()(e,["className","onClick","data","link"]),t.averageLeadTime),s=t.averageActiveTime,c=t.start,i=t.end,o=t.loading,u=t.numberOfExecutions,m=t.numberOfScenarios,d=t.name,_=t.employeesInvolvedProcess;return n.a.createElement("div",{className:"".concat(Me.card," ").concat(a)},n.a.createElement("div",{className:Me.header},n.a.createElement("h3",{className:Me.header__title},d),r?n.a.createElement(p.b,{className:Me.header__link,to:r},n.a.createElement("p",null,"На карту процесса"),n.a.createElement("img",{src:"".concat("/","assets/imgs/processCard/chevrone_right.png")})):n.a.createElement("a",{className:"".concat(Me.header__link," ").concat(Me.header__link_disabled)},n.a.createElement("p",null,"На карту процесса"),n.a.createElement("img",{src:"".concat("/","assets/imgs/processCard/chevrone_right.png")}))),n.a.createElement("div",{className:Me.body},n.a.createElement("div",{className:Me.body__item},n.a.createElement("div",{className:Me.dataCell},n.a.createElement("img",{className:Me.dataCell__icon,src:"".concat("/","assets/imgs/processCard/load.png")}),n.a.createElement("div",{className:Me.dataCell__data},n.a.createElement("p",{className:"".concat(Me.dataCell__title," ").concat(Me.dataCell__title_numberOfExecutions)},u),n.a.createElement("p",{className:"".concat(Me.dataCell__label)},"выполнено раз")))),n.a.createElement("div",{className:Me.body__item},n.a.createElement("div",{className:Me.dataCell},n.a.createElement("img",{className:Me.dataCell__icon,src:"".concat("/","assets/imgs/processCard/clock.png")}),n.a.createElement("div",{className:Me.dataCell__data},n.a.createElement("p",{className:Me.dataCell__title},l),n.a.createElement("p",{className:"".concat(Me.dataCell__label)},"среднее время выполнения"))),n.a.createElement("div",{className:Me.dataCell},n.a.createElement("img",{className:Me.dataCell__icon,src:"".concat("/","assets/imgs/processCard/timer.png")}),n.a.createElement("div",{className:Me.dataCell__data},n.a.createElement("p",{className:Me.dataCell__title},s),n.a.createElement("p",{className:"".concat(Me.dataCell__label)},"среднее активное время")))),n.a.createElement("div",{className:Me.body__item},n.a.createElement("div",{className:Me.dataCell},n.a.createElement("img",{className:Me.dataCell__icon,src:"".concat("/","assets/imgs/processCard/users.png")}),n.a.createElement("div",{className:Me.dataCell__data},n.a.createElement("p",{className:Me.dataCell__title},_),n.a.createElement("p",{className:"".concat(Me.dataCell__label)},"участвуют в процессе"))),n.a.createElement("div",{className:Me.dataCell},n.a.createElement("img",{className:Me.dataCell__icon,src:"".concat("/","assets/imgs/processCard/tree.png")}),n.a.createElement("div",{className:Me.dataCell__data},n.a.createElement("p",{className:Me.dataCell__title},m),n.a.createElement("p",{className:"".concat(Me.dataCell__label)},"в процессе")))),n.a.createElement("div",{className:Me.body__item},n.a.createElement("div",{className:Me.dateLine},n.a.createElement("p",{className:Me.dateLine__title},"Начало"),n.a.createElement("p",{className:Me.dateLine__date},c)),n.a.createElement("div",{className:Me.dateLine},n.a.createElement("p",{className:Me.dateLine__title},"Окончание"),n.a.createElement("p",{className:Me.dateLine__date},i)),n.a.createElement("div",{className:Me.dateLine},n.a.createElement("p",{className:Me.dateLine__title},"Загрузка"),n.a.createElement("p",{className:Me.dateLine__date},o)))))}Se.defaultProps={className:void 0,onClick:function(){},data:{},link:null},Se.propTypes={className:b.a.string,onClick:b.a.func,data:b.a.object,link:b.a.string};var De="styles-module__layout_45cb4";function Le(){var e=d()(["\n  query{\n    processList{\n      id,\n      name,\n      numberOfExecutions,\n      averageLeadTime,\n      averageActiveTime,\n      employeesInvolvedProcess,\n      numberOfScenarios,\n      start,\n      end,\n      loading\n    }\n  }\n"]);return Le=function(){return e},e}Pe.a.locale("ru");var xe=Object(i.gql)(Le());var Ve=function(e){var a=Object(i.useQuery)(xe),t=a.loading,r=a.error,l=a.data,s=void 0===l?null:l;if(r)return n.a.createElement(be,{className:De},n.a.createElement(J,{text:"Не удалось получить данные, попробуйте снова..."}));var c=s?s.processList:null,o=null;return c&&(o=c.map((function(e){var a,t=e.id,r=e.averageLeadTime,l=e.averageActiveTime,s=e.start,c=e.end,i=e.loading,o=e.numberOfExecutions,u=e.numberOfScenarios,m=e.name,d=e.employeesInvolvedProcess,_=Pe.a.utc(Number(r)).format("HH:mm").split(":"),p=Pe.a.utc(Number(l)).format("HH:mm").split(":");l="".concat(p[0],"ч ").concat(p[1]," мин (").concat((l/r*100).toFixed(1),"%)"),r="".concat(_[0],"ч ").concat(_[1]," мин"),s=Pe.a.unix(Number(s)).format("DD MMMM YYYY"),c=Pe.a.unix(Number(c)).format("DD MMMM YYYY"),i=Pe.a.unix(Number(i)).format("DD MMMM YYYY"),o=o.toLocaleString("ru");var f=u.toLocaleString("ru");u="".concat(f," сценариев");var v=d.toLocaleString("ru");return a={averageLeadTime:r,averageActiveTime:l,start:s,end:c,loading:i,numberOfExecutions:o,numberOfScenarios:u,name:m,employeesInvolvedProcess:d="".concat(v," сотрудников")},n.a.createElement(Se,{key:t,data:a})}))),n.a.createElement(be,{className:De},t?n.a.createElement(C,null):o||"Пока ничего...")},$e="styles-module__container_45c44";function Re(e){return n.a.createElement("div",{className:$e},n.a.createElement("p",null,"404 not found"),e.children)}var Te=[{name:"home",url:"/",container:Ve,exact:!0},{name:"login",url:"/login",container:function(e){var a=Object(i.useMutation)(ve),t=u()(a,2),l=t[0],s=t[1],o=(s.data,s.error),m=s.loading,d=Object(c.b)(),f=Object(c.c)((function(e){return e.user.isAuthorized})),v=Object(r.useState)({email:{value:"",errMessage:"Не корректный email",isValid:!0,validate:function(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.trim())}},password:{value:"",validate:function(e){return!0}}}),g=u()(v,2),b=g[0],E=g[1],N=function(e,a){b[a].validate(e.target.value)?E(pe(pe({},b),{},L()({},a,pe(pe({},b[a]),{},{value:e.target.value,isValid:!0})))):E(pe(pe({},b),{},L()({},a,pe(pe({},b[a]),{},{value:e.target.value,isValid:!1}))))},y=function(){var a=S()(P.a.mark((function a(){var t,r,n,s,c;return P.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=b.email.value,r=b.password.value,a.next=5,l({variables:{email:t,password:r}});case 5:n=a.sent,s=n.data.login.token,c=n.data.login.user.id,window.localStorage.setItem("token",s),d(ae(c)),e.history.go(0),a.next=15;break;case 13:a.prev=13,a.t0=a.catch(0);case 15:case"end":return a.stop()}}),a,null,[[0,13]])})));return function(){return a.apply(this,arguments)}}(),h=n.a.createElement("form",{className:ue,onSubmit:function(e){e.preventDefault(),y()}},n.a.createElement(A,{disabled:m,value:b.email.value,type:"email",name:"email",placeholder:"Электронная почта",errMessage:b.email.errMessage,isValid:b.email.isValid,onChange:function(e){N(e,"email")}}),n.a.createElement(U,{disabled:m,value:b.password.value,name:"password",placeholder:"Пароль",onChange:function(e){N(e,"password")}}),n.a.createElement(B,{type:"submit",disabled:m,value:m?"Вход в систему, ждите...":"Войти в систему",onClick:y}));return n.a.createElement(n.a.Fragment,null,f?n.a.createElement(_.a,{to:"/"}):n.a.createElement(R,{form:h},m?n.a.createElement("p",{className:"".concat(me)}," Зарегистрироваться "):n.a.createElement(p.b,{className:"".concat(me),to:Ae.registration},"Зарегистрироваться"),o&&n.a.createElement(J,{className:de,text:"Неправильный логин или пароль"})))},exact:!0},{name:"registration",url:"/registration",container:function(e){var a=Object(i.useMutation)(oe),t=u()(a,2),l=t[0],s=t[1],o=(s.data,s.loading),m=s.error,d=Object(c.c)((function(e){return e.user.isAuthorized})),f=Object(r.useState)({firstName:{value:"",errMessage:'Поле "имя" должно содержать минимум два символа и не должно содержать цифр.',isValid:!0,validate:function(e,a){return/^[a-zA-Zа-яА-Я']{2,}$/.test(e.trim())}},secondName:{value:"",errMessage:'Поле "фамилия" должно содержать минимум два символа и не должно содержать цифр.',isValid:!0,validate:function(e,a){return/^[a-zA-Zа-яА-Я']{1,}$/.test(e.trim())}},email:{value:"",errMessage:"Не корректный email",isValid:!0,validate:function(e,a){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.trim())}},password:{value:"",errMessage:"Пароль должен состоять из цифр, букв и хотя бы одного спец. символа из [!@#$%&_=.`~,[]:;|/]. Так же всего должно быть не меньше 8 символов.",isValid:!0,validate:function(e,a){return[/^.*[0-9]+.*$/,/^.*[!@#$%&_=\.`~,\[\]:;\{\}\|\\\/]+.*$/,/^.*[a-zA-Z]+.*$/,/^[\d\w\!\@\#\$\%\&\_\=\.\`\~\,\[\:\;\{\}\|\\\/]{8,}/].every((function(a){return a.test(e)}))}},checkPassword:{value:"",errMessage:"Пароли не совпадают",isValid:!0,validate:function(e,a){return e===a.password.value&&""!==e}}}),v=u()(f,2),g=v[0],b=v[1],E=function(e,a){g[a].validate(e,g)?b((function(t){return ce(ce({},t),{},L()({},a,ce(ce({},t[a]),{},{value:e,isValid:!0})))})):b((function(t){return ce(ce({},t),{},L()({},a,ce(ce({},t[a]),{},{value:e,isValid:!1})))}))},N=function(){var a=S()(P.a.mark((function a(){var t,r,n,s,c,i;return P.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=g.firstName.value,r=g.secondName.value,n=g.email.value,s=g.password.value,a.next=7,l({variables:{firstName:t,secondName:r,email:n,password:s}});case 7:c=a.sent,i=c.data.signup,window.localStorage.setItem("token",i),e.history.go(0),a.next=15;break;case 13:a.prev=13,a.t0=a.catch(0);case 15:case"end":return a.stop()}}),a,null,[[0,13]])})));return function(){return a.apply(this,arguments)}}(),y=function(){var e=Object.keys(g);e.every((function(e){return""!==g[e].value&&g[e].isValid}))?N():e.forEach((function(e){return E(g[e].value,e)}))},h=n.a.createElement("form",{className:te,onSubmit:function(e){e.preventDefault(),y()}},n.a.createElement(A,{disabled:o,value:g.firstName.value,type:"text",name:"firstName",placeholder:"Имя",errMessage:g.firstName.errMessage,isValid:g.firstName.isValid,onChange:function(e){E(e.target.value,"firstName")}}),n.a.createElement(A,{disabled:o,value:g.secondName.value,type:"text",name:"secondName",placeholder:"Фамилия",errMessage:g.secondName.errMessage,isValid:g.secondName.isValid,onChange:function(e){E(e.target.value,"secondName")}}),n.a.createElement(A,{disabled:o,value:g.email.value,type:"email",name:"email",placeholder:"Электронная почта",errMessage:g.email.errMessage,isValid:g.email.isValid,onChange:function(e){E(e.target.value,"email")}}),n.a.createElement(U,{disabled:o,value:g.password.value,name:"password",placeholder:"Введите пароль",errMessage:g.password.errMessage,isValid:g.password.isValid,onChange:function(e){E(e.target.value,"password")}}),n.a.createElement(U,{disabled:o,value:g.checkPassword.value,name:"checkPassword",placeholder:"Повторите пароль",errMessage:g.checkPassword.errMessage,isValid:g.checkPassword.isValid,onChange:function(e){E(e.target.value,"checkPassword")}}),n.a.createElement(B,{type:"submit",disabled:o,value:o?"Идет отправка на сервер...":"Регистрация",onClick:function(){y()}})),O=null;return m&&(O=m.networkError?m.networkError.statusCode:m.graphQLErrors[0].statusCode),console.log("statusCode",O),n.a.createElement(n.a.Fragment,null,d?n.a.createElement(_.a,{to:"/"}):n.a.createElement(R,{form:h},o?n.a.createElement("p",{className:"".concat(re)}," Уже зарегистрированы? Вход"):n.a.createElement("p",null,"Уже зарегистрированы? ",n.a.createElement(p.b,{className:"".concat(ne),to:Ae.login},"Вход")),m&&n.a.createElement(J,{className:le,text:500===O?"Такой email уже зарегистрирован.":"Ошибка :( Попробуйте позже"})))},exact:!0},{name:"lk",url:"/lk",container:je,exact:!0},{name:"processes",url:"/processes",container:Ve,exact:!0},{url:"**",container:function(e){return n.a.createElement(n.a.Fragment,null,n.a.createElement(Re,null,n.a.createElement("p",{onClick:e.history.goBack},"Вернуться на главную!")))}}],Ae={};Te.forEach((function(e){e.hasOwnProperty("name")&&(Ae[e.name]=e.url)}));function ze(){var e=d()(["\n\tquery{\n\t\tcurrentUser{\n      id,\n      email,\n      firstName,\n      secondName\n\t\t}\n\t}\n"]);return ze=function(){return e},e}var Ie=Object(i.gql)(ze());var qe=function(e){var a=Object(r.useState)(!1),t=u()(a,2),l=t[0],s=t[1],o=Object(i.useQuery)(Ie),m=o.loading,d=(o.error,o.data),f=void 0===d?null:d,v=Object(c.b)(),g=Object(c.c)((function(e){return e.errStore})),b=Object(c.c)((function(e){return e.user.id})),E=!!f;f&&f.currentUser.id!==b&&v(ae(f.currentUser.id));var N=function(){s(!1)},y=Te.map((function(e){return n.a.createElement(_.b,{path:e.url,component:e.container,exact:e.exact,key:e.url})}));return n.a.createElement(p.a,null,n.a.createElement(n.a.Fragment,null,m?n.a.createElement(C,null):n.a.createElement(n.a.Fragment,null,E?n.a.createElement(n.a.Fragment,null,n.a.createElement("header",{className:j.header},n.a.createElement("div",{className:"".concat(j.btnMenu," ").concat(l&&j.btnMenu_invisible),onClick:function(){s(!0)}},n.a.createElement("img",{src:"".concat("/","assets/imgs/menu.png")}),n.a.createElement("p",null,"Меню"))),n.a.createElement("main",{className:j.content},n.a.createElement(_.d,null,y))):n.a.createElement(n.a.Fragment,null,n.a.createElement(_.a,{to:{pathname:"/login"}}),n.a.createElement(_.d,null,y))),l&&n.a.createElement("div",{className:j.menuWrapper},n.a.createElement("menu",{className:j.menuLeftPart},n.a.createElement("div",{className:"".concat(j.btnMenu," ").concat(j.btnMenu_opened),onClick:N},n.a.createElement("img",{src:"".concat("/","assets/imgs/menu.png")}),n.a.createElement("p",null,"proceset")),n.a.createElement("ul",{className:j.menu},n.a.createElement("li",{className:j.menu__item},n.a.createElement(p.c,{className:j.menu__link,to:Ae.lk,activeClassName:j.menu__link_active,onClick:N},n.a.createElement("img",{src:"".concat("/","assets/imgs/user_icon.png")}),n.a.createElement("p",null,"Профиль"))),n.a.createElement("li",{className:j.menu__item},n.a.createElement(p.c,{className:j.menu__link,to:Ae.processes,activeClassName:j.menu__link_active,onClick:N},n.a.createElement("img",{src:"".concat("/","assets/imgs/process_icon.png")}),n.a.createElement("p",null,"Список процессов"))))),n.a.createElement("div",{className:j.menuRightPart,onClick:N})),n.a.createElement(O,{text:g.errMessage,onClose:function(){v({type:"ERRORS/ERROR_SHOW",payload:{isError:!1,errMessage:""}})},isError:g.isError})))},Fe=t(33);function He(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function Ye(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?He(Object(t),!0).forEach((function(a){L()(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):He(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var Ze={isError:!1,errMessage:"Упс, что то пошло нет так :("};function Ue(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function We(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?Ue(Object(t),!0).forEach((function(a){L()(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ue(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var Be={id:null,isAuthorized:!1};var Qe=Object(Fe.c)({errStore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"ERRORS/ERROR_SHOW":case"ERRORS/ERROR_SHOW":return Ye(Ye({},e),a.payload);default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case K:case"USER/LOGIN":return We(We({},e),a.payload);default:return e}}}),Xe=Object(Fe.e)(Qe,Object(Fe.d)(Object(Fe.a)(),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),Ge=new i.HttpLink({uri:"http://localhost:4000/api"}),Je=new i.ApolloLink((function(e,a){return e.setContext({headers:{authorization:localStorage.getItem("token")?"Bearer ".concat(localStorage.getItem("token")):null}}),a(e)})),Ke=new i.ApolloClient({cache:new i.InMemoryCache,link:Object(i.concat)(Je,Ge)});s.a.render(n.a.createElement(c.a,{store:Xe},n.a.createElement(i.ApolloProvider,{client:Ke},n.a.createElement(qe,null))),document.querySelector("#app"))}});